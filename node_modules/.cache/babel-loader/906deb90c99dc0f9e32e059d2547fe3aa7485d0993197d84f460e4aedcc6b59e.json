{"ast":null,"code":"import{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import axios from'axios';import toast,{Toaster}from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Apply=_ref=>{let{user}=_ref;const{jobId}=useParams();const[job,setJob]=useState(null);const[error,setError]=useState('');const navigate=useNavigate();// Redirect logic for non-applicants\nuseEffect(()=>{if(!user||user.role!=='applicant'){navigate('/');}},[user,navigate]);// Fetch job details\nuseEffect(()=>{const fetchJob=async()=>{try{const res=await axios.get(\"https://talenthub-backend-bhrj.onrender.com/jobs/\".concat(jobId));setJob(res.data);}catch(err){setError('Job not found');toast.error('Job not found',{icon:'‚ùå'});}};fetchJob();},[jobId]);const handleApply=async()=>{try{await axios.post('https://talenthub-backend-bhrj.onrender.com/applications',{jobId},{headers:{Authorization:\"Bearer \".concat(user.token)}});// Show success toast\ntoast.success('Application submitted successfully!',{icon:'üéâ'});setTimeout(()=>navigate('/my-applications'),2000);}catch(err){var _err$response,_err$response$data;console.error('Application error:',err);const errorMessage=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Failed to apply. Maybe already applied?';toast.error(errorMessage,{icon:'‚ùå'});}};if(error)return/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500\",children:error});if(!job)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md mx-auto\",children:[/*#__PURE__*/_jsx(Toaster,{position:\"top-right\",reverseOrder:false,toastOptions:{style:{maxWidth:'400px',padding:'16px',borderRadius:'8px',boxShadow:'0 4px 12px rgba(0, 0, 0, 0.15)',fontSize:'16px',fontWeight:'500'},success:{style:{background:'#10B981',color:'#ffffff',border:'1px solid #059669'},iconTheme:{primary:'#ffffff',secondary:'#10B981'}},error:{style:{background:'#EF4444',color:'#ffffff',border:'1px solid #B91C1C'},iconTheme:{primary:'#ffffff',secondary:'#EF4444'}}}}),/*#__PURE__*/_jsxs(\"h1\",{className:\"text-3xl font-bold mb-6 text-primary\",children:[\"Apply for \",job.title]}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-4\",children:job.description}),/*#__PURE__*/_jsx(\"button\",{onClick:handleApply,className:\"w-full bg-secondary text-white py-2 rounded hover:bg-green-700\",children:\"Submit Application\"})]});};export default Apply;","map":{"version":3,"names":["useState","useEffect","useParams","useNavigate","axios","toast","Toaster","jsx","_jsx","jsxs","_jsxs","Apply","_ref","user","jobId","job","setJob","error","setError","navigate","role","fetchJob","res","get","concat","data","err","icon","handleApply","post","headers","Authorization","token","success","setTimeout","_err$response","_err$response$data","console","errorMessage","response","message","className","children","position","reverseOrder","toastOptions","style","maxWidth","padding","borderRadius","boxShadow","fontSize","fontWeight","background","color","border","iconTheme","primary","secondary","title","description","onClick"],"sources":["E:/myproject/TalentHub_full/frontend/src/pages/Apply.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport toast, { Toaster } from 'react-hot-toast';\r\n\r\nconst Apply = ({ user }) => {\r\n  const { jobId } = useParams();\r\n  const [job, setJob] = useState(null);\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  // Redirect logic for non-applicants\r\n  useEffect(() => {\r\n    if (!user || user.role !== 'applicant') {\r\n      navigate('/');\r\n    }\r\n  }, [user, navigate]);\r\n\r\n  // Fetch job details\r\n  useEffect(() => {\r\n    const fetchJob = async () => {\r\n      try {\r\n        const res = await axios.get(`https://talenthub-backend-bhrj.onrender.com/jobs/${jobId}`);\r\n        setJob(res.data);\r\n      } catch (err) {\r\n        setError('Job not found');\r\n        toast.error('Job not found', { icon: '‚ùå' });\r\n      }\r\n    };\r\n    fetchJob();\r\n  }, [jobId]);\r\n\r\n  const handleApply = async () => {\r\n    try {\r\n      await axios.post(\r\n        'https://talenthub-backend-bhrj.onrender.com/applications',\r\n        { jobId },\r\n        { headers: { Authorization: `Bearer ${user.token}` } }\r\n      );\r\n      // Show success toast\r\n      toast.success('Application submitted successfully!', {\r\n        icon: 'üéâ',\r\n      });\r\n      setTimeout(() => navigate('/my-applications'), 2000);\r\n    } catch (err) {\r\n      console.error('Application error:', err);\r\n      const errorMessage = err.response?.data?.message || 'Failed to apply. Maybe already applied?';\r\n      toast.error(errorMessage, {\r\n        icon: '‚ùå',\r\n      });\r\n    }\r\n  };\r\n\r\n  if (error) return <p className=\"text-red-500\">{error}</p>;\r\n  if (!job) return <p>Loading...</p>;\r\n\r\n  return (\r\n    <div className=\"max-w-md mx-auto\">\r\n      {/* Toaster component with custom styling */}\r\n      <Toaster\r\n        position=\"top-right\"\r\n        reverseOrder={false}\r\n        toastOptions={{\r\n          style: {\r\n            maxWidth: '400px',\r\n            padding: '16px',\r\n            borderRadius: '8px',\r\n            boxShadow: '0 4px 12px rgba(0, 0, 0, 0.15)',\r\n            fontSize: '16px',\r\n            fontWeight: '500',\r\n          },\r\n          success: {\r\n            style: {\r\n              background: '#10B981',\r\n              color: '#ffffff',\r\n              border: '1px solid #059669',\r\n            },\r\n            iconTheme: {\r\n              primary: '#ffffff',\r\n              secondary: '#10B981',\r\n            },\r\n          },\r\n          error: {\r\n            style: {\r\n              background: '#EF4444',\r\n              color: '#ffffff',\r\n              border: '1px solid #B91C1C',\r\n            },\r\n            iconTheme: {\r\n              primary: '#ffffff',\r\n              secondary: '#EF4444',\r\n            },\r\n          },\r\n        }}\r\n      />\r\n      <h1 className=\"text-3xl font-bold mb-6 text-primary\">\r\n        Apply for {job.title}\r\n      </h1>\r\n      <p className=\"mb-4\">{job.description}</p>\r\n      <button\r\n        onClick={handleApply}\r\n        className=\"w-full bg-secondary text-white py-2 rounded hover:bg-green-700\"\r\n      >\r\n        Submit Application\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Apply;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}